<html>

<head>
<title>Distance calculation : Thiessen map</title>
<meta name="author" content="Petra Budde, Raymond Nijmeijer">
<meta name="keywords" content="Distance calculation, Thiessen map">
<link rel=stylesheet type="text/css" href="../ilwis.css">
<SCRIPT TYPE="text/javascript"> 
 <!-- 
 function popup(mylink, windowname) 
 { 
 if (! window.focus)return true; 
 var href; 
 if (typeof(mylink) == 'string') 
    href=mylink; 
 else 
   href=mylink.href; 
window.open(href, windowname, 'width=500,height=400,scrollbars=yes'); 

return false;
}
//-->
</SCRIPT>
</head>
<body text="#000000" bgcolor="#FFFFFF">

<h1 class=firstline>Distance calculation</h1>

<h1 class=secondline>Thiessen map</h1>

<!--<hr>-->

<p class=defnewpar>By calculating a Thiessen map, each pixel is assigned the class name, ID or value of the nearest source. A Thiessen map can be created by performing a Distance calculation on any raster source map. </p>

<p class=defnewpar>A Thiessen map is created in two steps:</p>

<ul>

<li>	prepare a <a href="..//ilwisapp/popup/distance_calculation_popup.htm" onClick="return popup(this, 'notes')" >source map</a> and if required a <a href="..//ilwisapp/popup/distance_calculation_weight_map_popup.htm" onClick="return popup(this, 'notes')" >weight map</a>;</li>

<li>    perform a distance calculation using the source map, and if required the weight map; indicate that you want to obtain a Thiessen map. </li>

</ul>

<p class=kopje>Input map requirements:</p>

<p>As <a href="..//ilwisapp/popup/distance_calculation_source_map_popup.htm" onClick="return popup(this, 'notes')" >source map</a>, it is advised to use a map with domain Identifier, but also maps with a class domain can be used. On the command line, also source maps with a value domain are accepted. All pixels with a class name, ID or value are considered as sources. The undefined pixels in this source map obtain the ID, class name or value of the nearest source. </p>

<p class=defnewpar>In the <a href="..//ilwisapp/popup/distance_calculation_weight_map_popup.htm" onClick="return popup(this, 'notes')" >weight map</a>, you can specify weight (resistance) factors that reflect the relative difficulty to pass the pixels. </p>

<ul>

<li>	If no resistances have to be taken into account, a weight map is not necessary. All pixels are assumed to have weight 1. </li>

<li>	Pixels with value 1 are normally accessible, pixels with value 2 are twice as difficult to access than pixels with value 1, etc.</li>

<li>	Pixels with a negative value or value 'undefined' cannot be reached; such pixels have a weight that is unlimitedly large.</li>

<li>	Pixels with value 0 have free accessibility: distance/time values will not increase while passing these areas.</li>

</ul>

<p class=kopje>Output maps:</p>

<p>When calculating a Thiessen map, also a distance map is calculated as a by-product. </p>

<p>Due to the algorithm of the distance operation, the boundaries between two areas in the Thiessen map may appear not straight, but octagonal around the sources. To obtain exact shortest distances, you can use the <a href="..//ilwisapp/popup/nearest_point_popup.htm" onClick="return popup(this, 'notes')" >Nearest point</a> operation.</p>

<p class=kopje>Domain and georeference of output maps:</p>

<p>The output Thiessen map always uses the same domain as the input source map.</p>

<p>The output distance map obtains by default system domain Distance; the <a href="..//ilwis/popup/y_value_range_popup.htm" onClick="return popup(this, 'notes')" >value range</a> and <a href="..//ilwis/popup/y_precision_popup.htm" onClick="return popup(this, 'notes')" >precision</a> for the output map can be adjusted each time you perform the Distance operation. You can also create or use a value domain of your own. </p>

<p>The output maps use the same georeference as the input maps.</p>

<p class=tip>Tips:</p>

<ul class=tipul>

<li>	If your sources are not too many points, and you do not want to take accessibily factors into account, the best way to create a Thiessen map is to use the <a href="..//ilwisapp/popup/nearest_point_popup.htm" onClick="return popup(this, 'notes')" >Nearest point</a> operation. </li>

<li>	 If line barriers are used with a width of only one pixel (e.g. rasterized segments), these barriers should be broadened before performing a distance calculation. This is because in the distance program, pixels are regarded to be 8-connected: each pixel has access to its eight neighbours (horizontally, vertically, and diagonally). Line barriers that are 8-connected can thus still be surpassed: only 4-connected lines cannot be surpassed. <br>
To make a raster map with line barriers 4-connected  instead of 8-connected, you can use use the <a href="..//ilwisapp/sec/filter_dilate4_sec.htm" onClick="return popup(this, 'notes')" >Dilate4</a> filter or the <a href="..//ilwisapp/sec/filter_eighttofour_sec.htm" onClick="return popup(this, 'notes')" >Conn8to4</a> filter. </li>

</ul>

<p class=Seealso>See also:</p>

<p class=seealsolinks><a href="distance_calculation_functionality.htm">Distance calculation : functionality</a></p>

</body