<html>

<head>
<title>Autocorrelation - Semivariance : functionality</title>
<meta name="author" content="Petra Budde, Raymond Nijmeijer">
<meta name="keywords" content="Autocorrelation, Semi-variance">
<link rel=stylesheet type="text/css" href="../ilwis.css">
<SCRIPT TYPE="text/javascript"> 
 <!-- 
 function popup(mylink, windowname) 
 { 
 if (! window.focus)return true; 
 var href; 
 if (typeof(mylink) == 'string') 
    href=mylink; 
 else 
   href=mylink.href; 
window.open(href, windowname, 'width=500,height=400,scrollbars=yes'); 

return false;
}
//-->
</SCRIPT>
</head>
<body text="#000000" bgcolor="#FFFFFF">

<h1 class=firstline>Autocorrelation - Semivariance</h1>

<h1 class=secondline>Functionality</h1>

<!--<hr>-->

<p class=defnewpar>AutoCorrelation calculates autocorrelation and semi-variogram values for a raster map. The autocorrelation of a raster map is generated by calculating the correlation between pixel values of a raster map and pixel values of the same raster map for different shifts (lags) in horizontal or vertical directions. The semi-variogram values which are a measure for the spatial variability of a raster map are calculated for the same shifts. The operation is a tool to obtain information on horizontal and vertical patterns in a raster map.</p>

<p class=kopje>Method:</p>

<p>The user has to specify a maximum pixel shift, i.e. the maximum distance for which values of pixels should be compared to each other.</p>

<ol>      

<li>	For each pixel, the value of that pixel (at position P) is compared with the value of the pixel one column to the right (position Q: row + 1) and one row below (position R: col + 1). Figure 1 below shows the collection of horizontal pairs of pixel values (PQ) for the first row of a map for shift 1;</li>

        <ul>

        <li>	for all collected values PQ , the horizontal correlation and semi-variogram values are calculated; and </li>

        <li>	for all collected values PR, the vertical correlation and semi-variogram values are calculated; </li>

        <li>	the calculated values are shown in the output table in record number 1 (shift 1). </li>

        </ul>

<li>	Subsequently, for each pixel, the value of that pixel (at position P) is compared with the values of the pixel two rows to the right (position Q: row + 2) and two columns below (position R: col + 2). Figure 2 below shows the collection of horizontal pairs of pixel values for the first row of the map for shift 2;</li>

        <ul>

        <li>	again for all pairs PQ, the horizontal correlation and semi-variogram values are calculated; and</li>

        <li>	for all pairs PR, the vertical correlation and semi-variogram values are calculated; </li>

        <li>	the calculated values are shown in the output table in record number 2 (shift 2). </li>

        </ul>

<li>	This continues until the specified maximum pixel shift is reached.</li>

<p class=emptyline>&nbsp;&nbsp; </p>

<table cellspacing=0>
<tr>
<td valign="top" width=151>
<p><img src="../images/shift1.gif" align=bottom width="129" height="129"></p>

</td>
<td valign="top" width=151>
<p><img src="../images/shift2.gif" align=bottom width="129" height="129"></p>

</td>
</tr>
<tr>
<td valign="top" width=151>
<p class=captionfig>Fig. 1: Collection of horizontal pairs of pixel values PQ for the first row in a map for shift 1.</p>

</td>
<td valign="top" width=151>
<p class=captionfig>Fig 2.: Collection of horizontal pairs of pixel values PQ for the first row in the map for shift 2.</p>

</td>
</tr>
</table>

</ol>

<p class=kopje>Autocorrelation and correlogram:</p>

<p>The method is based on the assumption that a regional variable becomes random at a great distance. The autocorrelation is a value between -1 and +1. A horizontal correlation value of 1 means a perfect correlation between pixels with a certain shift, i.e. the pixel values at P (column position P) and Q (column position P + shift) increase and decrease exactly proportionally. Variation is however rarely as regular as this. In most cases autocorrelation is large at short shifts, where the values of P and Q are similar. It decreases to 0 at larger shifts, where there is little relation. A plot of the autocorrelation against the shift is known as a correlogram.</p>

<p class=kopje>Semi-variogram values and semi-variogram:</p>

<p>Semi-variogram values are a measure of variance. It is a straightforward way of measuring how a value changes between P and Q.  In the calculation, it is assumed that the variance of differences only depends on the distance between P and Q. A plot of the calculated semi-variogram values against the shifts (lags or distance) is known as a semi-variogram. </p>

<p class=linespacing03after>The figure below shows a typical semi-variogram:</p>

<p><img src="../images/smvar3.gif" align=bottom width="320" height="161"></p>

<p class=defnewpar>It can be seen from the figure that the curve rises from a small semi-variogram value to higher levels at larger shifts, where it levels off. This horizontal part is known as the <i>sill</i>. At these large values of the lag there is no spatial dependence between  the data points. The estimates of variances of differences will be invariant with distance. The distance at which the semi-variogram values approach the sill is the <i>range</i>. The range is the important part of the variogram because it describes how inter-site differences are spatially dependent. A long range indicates high correlation, a small range indicates low correlation. Often the semi-variogram values do not approach zero at the origin; semi-variogram values may seem to intersect the positive y-axis. This can be seen as the residual, spatially uncorrelated noise, which is also knows as  the <i>nugget</i>. </p>

<p class=kopje>Example:</p>

<p>The program can be used to detect correlation between pixels at regular horizontal or vertical distance intervals. In this way repetitions, or repeated patterns in a map, can be detected. An autocorrelation graph with regular peaks at certain interval distances indicates a cyclicity in the map. For instance, a map depicting the wave height at sea in a certain area will show an increased autocorrelation at a distance equal to the wave length, when looking in a direction parallel to the propagation direction of the waves.</p>

<p class=kopje>Input map requirements:</p>

<p>The input raster map needs to have the <span class=courier>Image</span> domain or a value domain.</p>

<p class=kopje>Output table:</p>

<p>An output table with domain <span class=courier>None</span> is created. The table has the same number of records as the pixel shift that you specified. The <i>record numbers</i> in the table represent the pixel shifts. The first record in the table represents a pixel shift of 1, the second record represents a pixel shift of 2, etc., and the last record thus represents the maximum pixel shift as specified. For your convenience, a distance column has been added which shows the pixel shift values as distance values (distance = record number <span class=courier>*</span> pixel size).</p>

<p class=defnewpar>The table contains 5 columns:</p>

<ul>

<li>	Column <span class=courier>Distance</span> shows the distance values (available when the input map uses a georeference);</li>

<li>	Column <span class=courier>HorCorr</span> shows correlation values for horizontal shifts; </li>

<li>	Column <span class=courier>VertCorr</span> shows correlation values for vertical shifts; </li>

<li>	Column <span class=courier>HorSemVar</span> shows semi-variogram values for horizontal shifts; </li>

<li>	Column <span class=courier>VertSemVar</span> shows semi-variogram values for vertical shifts.</li>

</ul>

<p class=tip>Tips: </p>

<ol class=tipol>

<li> For a better understanding it is useful to visualize autocorrelation and semi-variogram values in a graph. To visualize for instance semi-variogram values:</li>

        <ul class=tipul>

        <li>	Open the output table so that it is displayed in a table window.</li>

        <li>	Open the <a href="../ilwis/table_window_menu_commands.htm">File menu</a> in the table window, select the <a href="../ilwismen/create_a_graph.htm"><span class=arial>Create Graph</a></span> command: select the <span class=courier>Distance</span> column for the X-axis and a column with horizontal or vertical semi-variogram values for the Y-axis. A point graph will be displayed in a new graph window. </li>

        <li>	You can then model your experimental semi-variogram values by selecting the <a href="../ilwismen/graph_window_add_semivariogram_model.htm"><span class=arial>Add Semi-variogram Model</a></span> command from the <a href="../ilwis/graph_window_menu_commands.htm">Edit menu</a> of the graph window. </li>

        </ul>

<p class=tiptext>	For more information on semi-variograms, see also <a href="../ilwisapp/spatial_correlation_functionality.htm">Spatial correlation : functionality</a>.</p>

<li> To visualize and determine a possible anisotropy axis, you can perform the <a href="..//ilwisapp/popup/variogram_surface_popup.htm" onClick="return popup(this, 'notes')" >Variogram surface</a> operation.</li>

<li> When you have <i>points</i>, you can perform the <a href="..//ilwisapp/popup/spatial_correlation_popup.htm" onClick="return popup(this, 'notes')" >Spatial correlation</a> operation: you can for instance calculate semi-variogram values for all or certain <i>directions</i>. To create points from a raster map, you can use the <a href="..//ilwisapp/popup/raster_to_points_popup.htm" onClick="return popup(this, 'notes')" >Raster to Points</a> operation. Although Spatial correlation has more possibilities for points, the algorithm may become slow when there are very many points; the Autocorrelation-Semivariance operation is rather fast for large (raster) maps.</li>

</ol>

<p class=Seealso>See also:</p>

<p class=seealsolinks><a href="auto_correlation_semivariance_dialog_box.htm">Autocorrelation - Semivariance : dialog box</a></p>

<p class=seealsolinks><a href="auto_correlation_semivariance_command_line.htm">Autocorrelation - Semivariance : command line</a></p>

<p class=seealsolinks><a href="auto_correlation_semivariance_algorithm.htm">Autocorrelation - Semivariance : algorithm</a></p>

<p class=seealsolinks><a href="../ilwisapp/spatial_correlation_functionality.htm">Spatial correlation : functionality</a></p>

</body